# Pathology Slide Viewer - PRODUCTION Environment Configuration
# Optimized for: Heavy-duty server with 64GB+ RAM, 16+ cores
# Copy this to .env.production and customize for your production server

NODE_MODE=server
NODE_ENV=production
PORT=3101
GUI_PORT=3003
CONVERSION_PORT=3001

# Storage paths - CUSTOMIZE FOR YOUR SERVER
SLIDES_DIR=/path/to/production/slides
DZI_DIR=/path/to/production/dzi
TEMP_DIR=/path/to/production/temp

# Performance optimizations (SERVER SETTINGS - 64GB+ RAM)
MAX_CONCURRENT=8

# VIPS Performance Settings (optimized for 2GB+ SVS files on server)
# VIPS_CONCURRENCY: Number of threads (36 = optimal for 16+ core server)
VIPS_CONCURRENCY=36

# VIPS Memory: 45GB max for VIPS operations (server with 64GB+ RAM)
VIPS_MAX_MEMORY=48318382080

# VIPS_CACHE_MAX_MEMORY: 10GB cache (large slide operations)
VIPS_CACHE_MAX_MEMORY=10737418240

# VIPS_DISC_THRESHOLD: Set HIGH to keep operations in RAM (faster)
# 107374182400 = 100GB (forces VIPS to use RAM instead of disk temp files)
VIPS_DISC_THRESHOLD=107374182400

# Node.js Memory Settings (for large files >2GB)
# 4GB per process for production server
# Total: ~12GB for 3 Node processes + 45GB VIPS + 10GB cache = ~67GB
NODE_OPTIONS=--max-old-space-size=4096
